<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Feature Matrix ¬∑ MVP-F</title>
  <meta name="description" content="–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç ‚Äî Feature Matrix (Heatmap) MVP" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar" role="banner">
    <div class="brand">
      <span class="logo" aria-hidden="true">‚óÜ</span>
      <span class="title">Feature Matrix ¬∑ MVP-F</span>
    </div>

    <nav class="kpis" aria-label="matrix KPIs">
      <div class="kpi"><span>Completeness</span><strong id="kpi-completeness">‚Äî</strong></div>
      <div class="kpi"><span>Evidence</span><strong id="kpi-evidence">‚Äî</strong></div>
      <div class="kpi"><span>Last refresh</span><strong id="kpi-refresh">‚Äî</strong></div>
      <div class="kpi"><span>Mode</span>
        <button id="btn-heat-toggle" class="chip" title="H">Heatmap</button>
      </div>
    </nav>

    <div class="actions">
      <button id="btn-cmd" class="ghost" title="‚åò/Ctrl+K">–ö–æ–º–∞–Ω–¥—ã</button>
      <button id="btn-export" class="primary" title="X">–≠–∫—Å–ø–æ—Ä—Ç</button>
      <button id="btn-theme" class="ghost" aria-label="Toggle theme" title="–¢–µ–º–∞">üåì</button>
    </div>
  </header>

  <main class="layout" role="main">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Primary">
      <div class="segment-select">
        <label for="segmentSelect">–°–µ–≥–º–µ–Ω—Ç</label>
        <select id="segmentSelect" aria-label="–í—ã–±–æ—Ä —Å–µ–≥–º–µ–Ω—Ç–∞"></select>
      </div>

      <nav class="primary-nav" aria-label="Primary Navigation">
        <button data-view="matrix" class="nav-btn active">Matrix</button>
        <button data-view="taxonomy" class="nav-btn">Taxonomy</button>
        <button data-view="competitors" class="nav-btn">Competitors</button>
        <button data-view="sources" class="nav-btn">Sources</button>
        <button data-view="exports" class="nav-btn">Exports</button>
        <button data-view="settings" class="nav-btn">Settings</button>
      </nav>

      <div class="shortcuts">
        <h4>–®–æ—Ä—Ç–∫–∞—Ç—ã</h4>
        <ul>
          <li>‚åò/Ctrl+K ‚Äî –ö–æ–º–∞–Ω–¥—ã</li>
          <li>H ‚Äî Heatmap</li>
          <li>E ‚Äî Add Evidence</li>
          <li>X ‚Äî Export</li>
        </ul>
      </div>
    </aside>

    <!-- Views -->
    <section id="view-matrix" class="view active" aria-labelledby="matrixTitle">
      <header class="view-header">
        <h2 id="matrixTitle">–ú–∞—Ç—Ä–∏—Ü–∞ —Ñ–∏—á √ó –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã</h2>
        <div class="view-actions">
          <button id="btn-add-feature" class="ghost">+ –§–∏—á–∞</button>
          <button id="btn-add-competitor" class="ghost">+ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç</button>
          <label class="switch"><input type="checkbox" id="filter-evidence"><span>–¢–æ–ª—å–∫–æ —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏</span></label>
        </div>
      </header>

      <div class="matrix-wrap" role="region" aria-label="Feature Matrix">
        <table id="matrix" class="matrix" aria-describedby="matrixTitle">
          <thead id="matrix-thead"></thead>
          <tbody id="matrix-tbody"></tbody>
        </table>
      </div>
    </section>

    <section id="view-taxonomy" class="view" aria-labelledby="taxonomyTitle">
      <header class="view-header">
        <h2 id="taxonomyTitle">Taxonomy (—Å–ª–æ–≤–∞—Ä—å —Ñ–∏—á)</h2>
        <div class="view-actions">
          <button id="btn-tax-add" class="ghost">+ –§–∏—á–∞</button>
        </div>
      </header>
      <div class="cards" id="taxonomy-cards"></div>
    </section>

    <section id="view-competitors" class="view" aria-labelledby="competitorsTitle">
      <header class="view-header">
        <h2 id="competitorsTitle">–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã</h2>
        <div class="view-actions">
          <button id="btn-comp-add" class="ghost">+ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç</button>
        </div>
      </header>
      <div class="cards" id="competitor-cards"></div>
    </section>

    <section id="view-sources" class="view" aria-labelledby="sourcesTitle">
      <header class="view-header">
        <h2 id="sourcesTitle">–ò—Å—Ç–æ—á–Ω–∏–∫–∏</h2>
      </header>
      <table class="sources" id="sources-table">
        <thead>
          <tr>
            <th>–¢–∏–ø</th><th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th><th>URL/Ref</th><th>–°–≤–µ–∂–µ—Å—Ç—å</th><th>Allow</th><th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section id="view-exports" class="view" aria-labelledby="exportsTitle">
      <header class="view-header">
        <h2 id="exportsTitle">–≠–∫—Å–ø–æ—Ä—Ç</h2>
      </header>
      <div class="export-grid">
        <div class="export-card">
          <h3>CSV</h3>
          <p>–í—ã–≥—Ä—É–∑–∫–∞ –º–∞—Ç—Ä–∏—Ü—ã –∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –≤ CSV-—Ñ–∞–π–ª—ã.</p>
          <button id="btn-export-csv" class="primary">–°–∫–∞—á–∞—Ç—å CSV</button>
        </div>
        <div class="export-card">
          <h3>Gamma Markdown</h3>
          <p>Slide-ready Markdown (Executive, Heatmap summary, Evidence Appendix).</p>
          <button id="btn-export-md" class="primary">–°–∫–∞—á–∞—Ç—å .md</button>
        </div>
      </div>
    </section>

    <section id="view-settings" class="view" aria-labelledby="settingsTitle">
      <header class="view-header">
        <h2 id="settingsTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
      </header>
      <div class="cards">
        <div class="card">
          <h3>–ë—Ä–µ–Ω–¥-—Ç–µ–º–∞</h3>
          <label>–¶–≤–µ—Ç –∞–∫—Ü–µ–Ω—Ç–∞ <input type="color" id="brand-accent" value="#5b8cfe" /></label>
        </div>
        <div class="card">
          <h3>–ö–æ–º–ø–ª–∞–µ–Ω—Å</h3>
          <label class="switch"><input type="checkbox" id="compliance-mode"><span>–¢–æ–ª—å–∫–æ allowlist –∏—Å—Ç–æ—á–Ω–∏–∫–∏</span></label>
        </div>
      </div>
    </section>
  </main>

  <!-- Evidence Drawer -->
  <aside id="evidence-drawer" class="drawer" aria-label="Evidence drawer" aria-hidden="true">
    <header class="drawer-head">
      <h3>–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</h3>
      <button id="btn-close-drawer" class="icon" aria-label="Close">‚úï</button>
    </header>
    <div class="drawer-body">
      <div class="drawer-meta" id="drawer-meta"></div>
      <form id="evidence-form" class="evidence-form">
        <label>–¢–∏–ø
          <select id="ev-type">
            <option value="url">URL</option>
            <option value="quote">–¶–∏—Ç–∞—Ç–∞</option>
            <option value="screenshot">–°–∫—Ä–∏–Ω</option>
          </select>
        </label>
        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ <input id="ev-title" type="text" placeholder="–ö—Ä–∞—Ç–∫–æ" /></label>
        <label>–°—Å—ã–ª–∫–∞/–¢–µ–∫—Å—Ç <input id="ev-ref" type="text" placeholder="https://‚Ä¶ –∏–ª–∏ —Ü–∏—Ç–∞—Ç–∞" /></label>
        <div class="form-actions">
          <button type="submit" class="primary">–î–æ–±–∞–≤–∏—Ç—å</button>
          <button type="button" id="btn-to-jira" class="ghost">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ Jira</button>
        </div>
      </form>

      <ul id="evidence-list" class="evidence-list"></ul>
    </div>
  </aside>

  <!-- Command Palette -->
  <div id="cmd-palette" class="modal" aria-hidden="true" role="dialog" aria-label="Command palette">
    <div class="modal-panel">
      <input id="cmd-input" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É‚Ä¶ (–Ω–∞–ø—Ä., add competitor)" aria-label="Command input" />
      <ul id="cmd-list"></ul>
    </div>
  </div>

  <!-- Toasts -->
  <div id="toasts" aria-live="polite" aria-atomic="true" class="toasts"></div>

  <script src="app.js" defer></script>
</body>
</html>
